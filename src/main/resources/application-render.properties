# PostgreSQL Configuration for Render Deployment
spring.datasource.url=${DATABASE_URL}
spring.datasource.driver-class-name=org.postgresql.Driver

# Connection Pool Configuration optimized for Render
spring.datasource.hikari.maximum-pool-size=${DB_MAX_CONNECTIONS:3}
spring.datasource.hikari.minimum-idle=1
spring.datasource.hikari.connection-timeout=60000
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=1200000
spring.datasource.hikari.leak-detection-threshold=60000
spring.datasource.hikari.connection-test-query=SELECT 1
spring.datasource.hikari.validation-timeout=10000

# PostgreSQL-specific JPA configuration
spring.jpa.database=postgresql
spring.jpa.hibernate.ddl-auto=${DDL_AUTO:update}
spring.jpa.show-sql=${SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Enable JPA auditing for BaseEntity
spring.jpa.hibernate.naming.physical-strategy=org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl
spring.data.jpa.repositories.enabled=true

# Server configuration for Render
server.port=${PORT:8080}
server.address=0.0.0.0
server.forward-headers-strategy=framework

# Security configuration
app.jwt.secret=${JWT_SECRET:myVerySecureJWTSecretKeyThatIsAtLeast256BitsLongForHMACAlgorithmSecurity123456789}
app.jwt.expiration=86400000

# Actuator configuration for health checks
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=never
management.health.db.enabled=true

# Logging configuration
logging.level.root=${LOG_LEVEL:INFO}
logging.level.com.example.collegeerp=INFO
logging.level.com.example.springbootdemo=INFO
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=${SHOW_SQL:false}
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=WARN

# Email configuration
app.email.verification.enabled=${EMAIL_VERIFICATION_ENABLED:false}

# Disable Swagger in production
springdoc.api-docs.enabled=false
springdoc.swagger-ui.enabled=false